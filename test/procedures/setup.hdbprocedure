PROCEDURE "CSWGITTEST"."de.linuxdozent.gittest.test.procedures::setup" ( )
	LANGUAGE SQLSCRIPT
	SQL SECURITY DEFINER
	DEFAULT SCHEMA CSWGITTEST
AS
BEGIN
    EXEC 'DROP USER BSCUSTOMER;';
    EXEC 'CREATE USER BSCUSTOMER PASSWORD Init1234;';
    EXEC 'CREATE USER BSADMIN PASSWORD Init1234;';

    -- Do not delete the existing books
    -- DELETE FROM "de.linuxdozent.gittest.data::Bookstore.Book";
    DELETE FROM "de.linuxdozent.gittest.data::Bookstore.Customer" WHERE "UserName" = 'BSCUSTOMER';
    DELETE FROM "de.linuxdozent.gittest.data::Bookstore.CustomerKey" WHERE "UserName" = 'BSCUSTOMER';
    DELETE FROM "de.linuxdozent.gittest.data::Bookstore.DiscountCode" WHERE "UserName" = 'BSCUSTOMER';
    DELETE FROM "de.linuxdozent.gittest.data::Bookstore.CustomerOrder.Header" WHERE "Customer" = 'BSCUSTOMER';

    CALL _SYS_REPO.GRANT_ACTIVATED_ROLE ('de.linuxdozent.gittest.roles::public','BSCUSTOMER');
    CALL _SYS_REPO.GRANT_ACTIVATED_ROLE ('de.linuxdozent.gittest.roles::admin','BSADMIN');

END